(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))u(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const s of t.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&u(s)}).observe(document,{childList:!0,subtree:!0});function n(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function u(e){if(e.ep)return;e.ep=!0;const t=n(e);fetch(e.href,t)}})();const ee=document.getElementById("prevButton"),te=document.getElementById("nextButton"),k=document.getElementById("marketPrice"),N=document.getElementById("caseImage"),R=document.getElementById("caseName"),ae=document.getElementById("buyButton"),re=document.getElementById("prevButtonHigh"),ne=document.getElementById("nextButtonHigh"),P=document.getElementById("marketPriceHigh"),$=document.getElementById("caseImageHigh"),U=document.getElementById("caseNameHigh"),ie=document.getElementById("buyButtonHigh"),_=document.getElementById("spent-amount"),I=document.getElementById("net-gain-amount"),S=document.getElementById("open-screen"),M=document.getElementById("revealed-item"),w=document.getElementById("close-opening"),j=document.getElementById("item-name"),q=document.getElementById("item-value"),z=new Audio("/assets/open.mp3"),C=document.getElementById("weapon-wheel"),b=document.getElementById("wheel-items");let g=0,h=0,m=!1,B=0,y=0,o=0,l=0,f={};const d=["Kilowatt Case","Revolution Case","Fracture Case"],Z={"Kilowatt Case":"/assets/cases/kilowatt.png","Revolution Case":"/assets/cases/revolution.png","Fracture Case":"/assets/cases/fracture.png"},v=["Operation Bravo Case","CS:GO Weapon Case","CS:GO Weapon Case 2","eSports 2013 Winter Case","eSports 2014 Summer Case"],J={"Operation Bravo Case":"/assets/cases/operation bravo.png","CS:GO Weapon Case":"/assets/cases/weapon.png","CS:GO Weapon Case 2":"/assets/cases/weapon2.png","eSports 2013 Winter Case":"/assets/cases/esports 2013 winter.png","eSports 2014 Summer Case":"/assets/cases/esports 2014 summer.png"},x=[{name:"Tec-9 | Slag",value:.18,rarity:"consumer"},{name:"XM1014 | Irezumi",value:.14,rarity:"consumer"},{name:"UMP-45 | Motorized",value:.14,rarity:"consumer"},{name:"SSG 08 | Dezastre",value:.15,rarity:"consumer"},{name:"Nova | Dark Sigil",value:.13,rarity:"consumer"},{name:"Dual Berettas | Hideout",value:.14,rarity:"consumer"},{name:"MAC-10 | Light Box",value:.23,rarity:"consumer"},{name:"MP7 | Just Smile",value:1.25,rarity:"mil-spec"},{name:"Five-SeveN | Hybrid",value:1.57,rarity:"mil-spec"},{name:"Sawed-Off | Analog Input",value:1.04,rarity:"mil-spec"},{name:"M4A4 | Etch lord",value:3.24,rarity:"restricted"},{name:"Glock-18 | Block-18",value:1.14,rarity:"mil-spec"},{name:"Zeus x27 | Olympus",value:8.21,rarity:"classified"},{name:"USP-S | Jawbreaker",value:13.15,rarity:"classified"},{name:"M4A1-S | Black Lotus",value:16.8,rarity:"classified"},{name:"AWP | Chrome Cannon",value:56.1,rarity:"covert"},{name:"AK-47 | Inheritance",value:181.13,rarity:"covert"},{name:"Kukri Knife | Fade",value:412.53,rarity:"contraband"}],se=[{name:"P250 | Re.built",value:.14,rarity:"mil-spec"},{name:"Tec-9 | Rebel",value:.14,rarity:"mil-spec"},{name:"MAG-7 | Insomnia",value:.15,rarity:"mil-spec"},{name:"SCAR-20 | Fragments",value:.14,rarity:"mil-spec"},{name:"MP5-SD | Liquidation",value:.16,rarity:"mil-spec"},{name:"MP9 | Featherweight",value:.14,rarity:"mil-spec"},{name:"SG 553 | Cyberforce",value:.15,rarity:"mil-spec"},{name:"R8 Revolver | Banana Cannon",value:.93,rarity:"restricted"},{name:"P90 | Neoqueen",value:.8,rarity:"restricted"},{name:"MAC-10 | Sakkaku",value:.22,rarity:"restricted"},{name:"Glock-18 | Umbral Rabbit",value:1.12,rarity:"restricted"},{name:"M4A1-S | Empthorosaur-S",value:4.35,rarity:"restricted"},{name:"P2000 | Wicked Sick",value:6.69,rarity:"classified"},{name:"UMP-45 | Wild Child",value:6.67,rarity:"classified"},{name:"AWP | Duality",value:9.18,rarity:"classified"},{name:"AK-47 | Headshot",value:51.53,rarity:"covert"},{name:"M4A1 | Temukau",value:63.04,rarity:"covert"},{name:"Glove | Vice",value:12521.42,rarity:"contraband"}],W={"Kilowatt Case":x,"Revolution Case":se,"Fracture Case":x},F=[{name:"MP7 | Skulls",value:15.08,rarity:"mil-spec"},{name:"SG 553 | Ultraviolet",value:34.45,rarity:"mil-spec"},{name:"AUG | Wings",value:13.54,rarity:"mil-spec"},{name:"Glock-18 | Dragon Tattoo",value:120,rarity:"restricted"},{name:"M4A1-S | Dark Water",value:90,rarity:"restricted"},{name:"USP-S | Dark Water",value:61.4,rarity:"restricted"},{name:"Desert Eagle | Hypnotic",value:98.24,rarity:"classified"},{name:"AK-47 | Case Hardened",value:370.99,rarity:"classified"},{name:"AWP | Lightning Strike",value:543.54,rarity:"covert"},{name:"Karambit | Fade",value:2045.65,rarity:"contraband"}],D=[{name:"MAG-7 | Memento",value:2.12,rarity:"mil-spec"},{name:"FAMAS | Dookitty",value:1.54,rarity:"mil-spec"},{name:"M4A4 | Faded Zebra",value:11.07,rarity:"mil-spec"},{name:"Sawed-Off | Orange DDPAT",value:32.54,rarity:"restricted"},{name:"P250 | Splash",value:22,rarity:"restricted"},{name:"Galil AR | Orange DDPAT",value:25.05,rarity:"restricted"},{name:"AK-47 | Red Laminate",value:325.14,rarity:"classified"},{name:"AWP | BOOM",value:350.45,rarity:"classified"},{name:"P90 | Death by Kitty",value:42.44,rarity:"covert"},{name:"Karambit | Fade",value:2045.65,rarity:"contraband"}],oe=[{name:"SG 553 | Wave Spray",value:8,rarity:"mil-spec"},{name:"G3SG1 | Demeter",value:10.43,rarity:"mil-spec"},{name:"Dual Berettas | Black Limba",value:15.08,rarity:"mil-spec"},{name:"UMP-45 | Bone Pile",value:7.56,rarity:"mil-spec"},{name:"Galil AR | Shattered",value:23.25,rarity:"mil-spec"},{name:"Nova | Tempest",value:8.32,rarity:"mil-spec"},{name:"M4A1-S | Bright Water",value:45,rarity:"restricted"},{name:"MAC-10 | Graven",value:39.12,rarity:"restricted"},{name:"USP-S | Overgrwoth",value:63,rarity:"restricted"},{name:"M4A4 | Zirka",value:60,rarity:"restricted"},{name:"P90 | Emerald Dragon",value:240,rarity:"classified"},{name:"P200 | Ocean Foam",value:132.12,rarity:"classified"},{name:"AWP | Graphite",value:200.07,rarity:"classified"},{name:"AK-47 | Fire Serpent",value:3154.32,rarity:"covert"},{name:"Desert Eagle | Golden Koi",value:283.07,rarity:"covert"},{name:"Karambit | Fade",value:2045.65,rarity:"contraband"}],K={"CS:GO Weapon Case":F,"eSports 2013 Winter Case":D,"Operation Bravo Case":oe,"CS:GO Weapon Case 2":F,"eSports 2014 Summer Case":D};async function A(a){if(m=!1,f[a]){g=parseFloat(f[a]),k.innerText="Market price: £"+String(g),m=!0;return}k.innerText="Market price: Loading...";var r=a.split(" "),n="";for(let t of r)n+=t+"%20";const e=await(await fetch(`https://api.flik.host/steam_market.php?item=${n}`)).json();if(!e||!e.mean_price){console.log(e);return}g=e.mean_price,f[a]=String(g),k.innerText="Market price: £"+String(g),m=!0}async function E(a){if(m=!1,f[a]){h=parseFloat(f[a]),P.innerText="Market price: £"+String(h),m=!0;return}P.innerText="Market price: Loading...";var r=a.split(" "),n="";for(let t of r)n+=t+"%20";const e=await(await fetch(`https://api.flik.host/steam_market.php?item=${n}`)).json();if(!e||!e.mean_price){console.log(e);return}h=e.mean_price,f[a]=String(h),P.innerText="Market price: £"+String(h),m=!0}function V(a=x){const r=Array.isArray(a)?a:Object.keys(a).map(t=>{const s=a[t];return typeof s=="number"?{name:t,value:s,rarity:"consumer"}:{name:t,value:typeof s.value=="number"?s.value:0,rarity:s.rarity??"consumer"}}),n={consumerGroup:50,restricted:30,classified:15,covert:4.74},u=Math.random()*100;let e=[];return u<n.consumerGroup?e=r.filter(t=>t.rarity==="consumer"||t.rarity==="mil-spec"):u<n.consumerGroup+n.restricted?e=r.filter(t=>t.rarity==="restricted"):u<n.consumerGroup+n.restricted+n.classified?e=r.filter(t=>t.rarity==="classified"):u<n.consumerGroup+n.restricted+n.classified+n.covert?e=r.filter(t=>t.rarity==="covert"):e=r.filter(t=>t.rarity==="contraband"),!e||e.length===0?r[Math.floor(Math.random()*r.length)]:e[Math.floor(Math.random()*e.length)]}function X(a,r){b.innerHTML="";const n={consumer:500,"mil-spec":500,restricted:100,classified:30,covert:8,contraband:1},u=i=>{const c=[];return i.forEach(p=>{const L=n[p.rarity]||1;for(let O=0;O<L;O++)c.push(p)}),c},e=i=>{const c=d[o]||v[l];let p="";c==="Kilowatt Case"?p="kilowatt":c==="Revolution Case"?p="revolution":p="kilowatt";const L=i.split(" | ")[1]?.toLowerCase().replace(/\s+/g," ")||"slag";return`/assets/${p}/${L}.png`},t=u(a),s=[];for(let i=0;i<200;i++){const c=t[Math.floor(Math.random()*t.length)];s.push(c)}s.push(r);const H=s.length-1;for(let i=0;i<20;i++){const c=t[Math.floor(Math.random()*t.length)];s.push(c)}s.forEach(i=>{const c=document.createElement("div");c.className=`wheel-item rarity-${i.rarity}`;const p=i.name.length>12?i.name.substring(0,12)+"...":i.name,L=e(i.name);c.innerHTML=`
      <img src="${L}" alt="${i.name}" class="w-8 h-8 object-contain mb-1" onerror="this.style.display='none'">
      <div class="text-xs font-bold mb-1">${p}</div>
      <div class="text-xs">£${i.value.toFixed(2)}</div>
    `,b.appendChild(c)}),console.log(`Created ${s.length} items, winning position: ${H}`);const T=74,Y=C.offsetWidth/2,G=-(H*T)+Y-T/2;console.log(`Final position: ${G}px`),document.documentElement.style.setProperty("--final-position",`${G}px`)}function Q(){C.classList.add("wheel-spinning")}function le(){z.play().catch(r=>console.log("Could not play sound:",r)),S.classList.remove("hidden"),S.classList.add("absolute"),M.classList.add("hidden"),w.classList.add("hidden"),C.classList.remove("wheel-spinning");const a=V(W[d[o]]);X(W[d[o]],a),setTimeout(()=>{Q()},500),setTimeout(()=>{y+=a.value,I.innerHTML="£"+String(y.toFixed(2)),j.innerText=a.name,q.innerText="£"+a.value.toFixed(2),M.classList.remove("hidden"),w.classList.remove("hidden")},6500)}function ce(){z.play().catch(r=>console.log("Could not play sound:",r)),S.classList.remove("hidden"),S.classList.add("absolute"),M.classList.add("hidden"),w.classList.add("hidden"),C.classList.remove("wheel-spinning");const a=V(K[v[l]]);X(K[v[l]],a),setTimeout(()=>{Q()},500),setTimeout(()=>{y+=a.value,I.innerHTML="£"+String(y.toFixed(2)),j.innerText=a.name,q.innerText="£"+a.value.toFixed(2),M.classList.remove("hidden"),w.classList.remove("hidden")},6500)}te.addEventListener("click",async()=>{m&&(o+=1,o>d.length-1&&(o=0),N.src=Z[d[o]],R.innerText=d[o],await A(d[o]))});ee.addEventListener("click",async()=>{m&&(o-=1,o<=-1&&(o=d.length-1),N.src=Z[d[o]],R.innerText=d[o],await A(d[o]))});ae.addEventListener("click",()=>{m&&(B+=g,y-=g,_.innerHTML="£"+String(B.toFixed(2)),I.innerHTML="£"+String(y.toFixed(2)),le())});ne.addEventListener("click",async()=>{m&&(l+=1,l>v.length-1&&(l=0),$.src=J[v[l]],U.innerText=v[l],await E(v[l]))});re.addEventListener("click",async()=>{m&&(l-=1,l<=-1&&(l=v.length-1),$.src=J[v[l]],U.innerText=v[l],await E(v[l]))});ie.addEventListener("click",()=>{m&&(B+=h,y-=h,_.innerHTML="£"+String(B.toFixed(2)),I.innerHTML="£"+String(y.toFixed(2)),ce())});w.addEventListener("click",()=>{S.classList.add("hidden"),S.classList.remove("absolute"),C.classList.remove("wheel-spinning"),b.innerHTML=""});document.addEventListener("DOMContentLoaded",async()=>{await A("Kilowatt Case"),await E("Operation Bravo Case")});
